function add(){var h=$("#dataField").attr("value");var j=$("#dataField").find("option:selected").text();var f=$("#dataSrc").attr("value");if(h==""){alert("\u8bf7\u9009\u62e9\u6570\u636e\u5e93\u5b57\u6bb5");return}var c=$("#itemTitle").attr("value");if(c==""){alert("\u8bf7\u586b\u5199\u6620\u5c04\u63a7\u4ef6\u540d\u79f0");return}var l=$("#map_tbl").find("tr");for(var e=1;e<l.length;e++){var d=$(l[e]).find("td");var k=$(d[0]).text();if(k==h){alert("\u5df2\u7ecf\u6dfb\u52a0\uff01");return}}var b=$("#isQuery").attr("checked")==true?"1":"0";var a=b=="1"?"\u662f":"\u5426";var g="";if($("#isQuery").css("display")=="none"){g="<tr><td >"+h+"</td><td >"+j+"</td><td >"+c+'</td><td ><a href="#" onclick="del(this)">\u5220\u9664</a></td></tr>'}else{g="<tr><td >"+h+"</td><td >"+j+"</td><td >"+c+"</td><td >"+a+'</td><td ><a href="#" onclick="del(this)">\u5220\u9664</a></td></tr>'}$("#map_tbl").append(g);$("#dataField ").val("");$("#itemTitle").attr("value","")}function del(a){$(a).parent().parent().remove()}function getData(b){$.ajax({type:"POST",url:"form-view!getTabelColumns.htm",data:{dataTableId:$("#dataSrc").attr("value"),formControlType:b},success:function(d,e){$("#dataField").html(d);if($("#isQuery").css("display")=="none"){$("#queryProperty").html(d)}},error:function(d,e){alert(e)}});$("#dataSrcName").attr("value",$("#dataSrc").find("option:selected").text());if($("#isQuery").css("display")=="none"){$("#queryProperty").attr("value","");$("#referenceControl").attr("value","")}var c=$("#map_tbl").find("tr");for(var a=c.length-1;a>=1;a--){$(c[a]).remove()}}function getListControlData(){$.ajax({type:"POST",url:"form-view!getTabelColumns.htm",data:{dataTableId:$("#dataSrc").attr("value"),formControlType:"LIST_CONTROL"},success:function(c,d){var a=$("#contentTable").find("tbody").find("tr").length;for(var b=0;b<a;b++){$("#item_"+(b+1)).attr("value","");$("#size_"+(b+1)).attr("value","10");$("#sum_"+(b+1)).attr("checked","");$("#cal_"+(b+1)).attr("value","");$("#dataField_"+(b+1)).html(c)}$("#dataField").html(c)},error:function(a,b){alert(b)}})}function listControlAddRow(){$("#contentTable").find("tbody").append($("#mata").find("tbody").html());var a=$("#contentTable").find("tbody").find("tr").length;$($("#contentTable").find("tbody").find("td[id='serNum']")).html(a);$($("#contentTable").find("tbody").find("td[id='serNum']")).attr("id","serNum_"+a);$($("#contentTable").find("tbody").find("input[id='item']")).attr("id","item_"+a);$($("#contentTable").find("tbody").find("input[id='size']")).attr("id","size_"+a);$($("#contentTable").find("tbody").find("input[id='sum']")).attr("id","sum_"+a);$($("#contentTable").find("tbody").find("input[id='cal']")).attr("id","cal_"+a);$($("#contentTable").find("tbody").find("select[id='dataField']")).attr("id","dataField_"+a);sortOrder()}function listControlDeleteRow(b){var a=$("#contentTable").find("tbody").find("tr").length;if(a>1){$(b).parent().parent().remove()}sortOrder()}function sortOrder(){$("#contentTable").find("td[id^='serNum_']").each(function(b){$(this).html(b+1);var e=$("#contentTable").find("td[id^='serNum_']")[b];var d=$("#contentTable").find("input[id^='item_']")[b];var a=$("#contentTable").find("input[id^='size_']")[b];var c=$("#contentTable").find("input[id^='sum_']")[b];var f=$("#contentTable").find("input[id^='cal_']")[b];var g=$("#contentTable").find("select[id^='dataField_']")[b];$(e).attr("id","serNum_"+(b+1));$(d).attr("id","item_"+(b+1));$(a).attr("id","size_"+(b+1));$(c).attr("id","sum_"+(b+1));$(f).attr("id","cal_"+(b+1));$(g).attr("id","dataField_"+(b+1))})};
