function __getSearchHeader(b,a,d,c){var e='<div id="search_header">';e+='<div id="search_title">\u67e5\u8be2\u6761\u4ef6</div>';e+='<div id="search_close" onclick="removeSearchBox();"> </div>';e+="</div>";e+='<input id="containerSearchInput" value="'+b+'" type="hidden" />';e+='<input id="advancedSearchInput" value="'+a+'" type="hidden" />';e+='<input id="fixedSearchSignInput" value="'+d+'" type="hidden" />';e+='<input id="submitForm" value="'+c+'" type="hidden" />';return e}function __getAdvancedSearchTable(){var a="";a+='<form id="default_Form" name="default_Form">';a+='<table id="advanced_search_table_id" style="border: 0px; WIDTH: 100%;float:center;padding:0 10px;">';a+="<tr>";a+='<td style="border: 0px;">';a+='<div  class="searchtable">';a+='<table class="" id="search_Table">';a+='<tr class="str">';a+='<th width="15px" style="border-right: 0px;"></th>';a+='<th width="140px" style="border-left: 0px;"> \u5b57\u6bb5</th>';a+='<th width="60px">\u8fd0\u7b97\u7b26</th>';a+='<th style="border-right: 0px;">\u503c</th>';a+='<th  width="15px" style="border-left: 0px;"></th>';a+='<th  width="60px">\u5173\u7cfb\u7b26</th>';a+='<th  width="70px">\u5220\u9664&nbsp;&nbsp;</th>';a+="</tr>";a+="</table>";a+="</div>";a+="</td>";a+="</tr>";a+="</table>";a+="</form>";return a}function __getSearchZoon(e,a,d,c,b){var f='<div id="searchZoon" style="display: none; margin-top: 6px;">';f+='<div id="_query_smessage" style="color: red; margin: 0px 0 0 20px;font-size:13px;"></div>';if(e!=""){f+='<textarea style="display:none;" id="field_list" >'+e+"</textarea>"}f+='<p style="margin: 2px 0 2px 0;*margin-top:-14px;">&nbsp;';f+='<select id="left_bracket"><option value="" selected="selected"></option><option value="(">(</option><option value="((">((</option></select>&nbsp;';f+='<select id="search_name" onchange="changeField();" style="width:100px"></select>&nbsp;';f+='<select id="num_sign" onchange="_optChange(this);" style="width:80px"></select>&nbsp;';f+='<span id="search_value" style="width:160px;"></span>&nbsp;';f+='<select id="right_bracket"><option value="" selected="selected"></option><option value=")">)</option><option value="))">))</option></select>&nbsp;';f+='<select id="rel_sign" style="width:50px"><option value="and">\u5e76\u4e14</option><option value="or">\u6216\u8005</option></select>&nbsp;';f+='<button class="btn" onclick="addParameter();"><span><span>\u6dfb\u52a0</span></span></button>';if(""==a&&""==d){f+='<button class="btn" onclick="commonSingleSearchSubmit({submitForm:\''+b+"',type:'advanced'});\"><span><span>\u786e\u8ba4</span></span></button>"}else{f+='<button class="btn" onclick="doSearch(\''+a+"', '"+d+"');\"><span><span>\u786e\u8ba4</span></span></button>"}f+='<button class="btn" onclick="resetParameter();"><span><span>\u6e05\u7a7a</span></span></button>';f+="</p>";f+='<form id="search_From" name="search_From" method="post">';f+='<input type="hidden" id="search_Parameters" name="searchParameters" />';f+="</form>";f+=__getAdvancedSearchTable();if(c!=""){f+='<a onclick="dynamicToFixed();" href="#" style="padding-left:12px;"> <<\u56fa\u5b9a\u67e5\u8be2 </a>'}f+="</div>";return f}function __getEnName(b){if(b==""){return""}var a=b.split(".");return a[(a.length-1)]}function __getSelectTag(e,a,d){var c='<select id="condition_'+a+'" ';c+='name="'+e.enName+'" dbName="'+e.dbName+'" myType="xiala" ';c+='dataType="'+e.propertyType+'" class="searchInputClass" ';if("ENUM"==e.propertyType){c+=' enumName="'+e.enumName+'" '}if(e.eventType!=""&&"ONCHANGE"==e.eventType){c+=' onchange="'+d+"QueryChange('condition_"+a+"');\""}c+=">";c+='<option value="" selected="selected">\u8bf7\u9009\u62e9</option>';if(e.defaultValues!=""){var f=e.defaultValues;for(var b=0;b<f.length;b++){c+='<option value="'+f[b].value+'">'+f[b].name+"</option>"}}c+="</select>";return c}function __getInputTag(e,a,c){var b='<input id="condition_'+a+'" ';b+='name="'+e.enName+'" dbName="'+e.dbName+'" ';b+='dataType="'+e.propertyType+'" class="searchInputClass" ';if("INTEGER"==e.propertyType||"LONG"==e.propertyType){b+=" onkeyup=\"value=value.replace(/[^0-9]/g,'');\""}else{if("DOUBLE"==e.propertyType||"FLOAT"==e.propertyType||"NUMBER"==e.propertyType||"AMOUNT"==e.propertyType){b+=" onkeyup=\"value=value.replace(/[^0-9.]/g,'');\""}}if(e.eventType!=""){if("ONCLICK"==e.eventType){b+=' onclick="'+c+"QueryClick('condition_"+a+"');\" ";b+=' readonly="readonly" '}else{if("BLUR"==e.eventType){b+=' onblur="'+c+"QueryBlur('condition_"+a+"');\" "}else{if(e.eventType.indexOf("/")!=-1){var d=e.eventType.split("/");b+=" onclick=\"formGridTree({currentInputId:'condition_"+a+"',treeType:'"+d[0]+"',isMutiply:'"+d[1]+"',useType:'false'});\" ";b+=' readonly="readonly" '}}}}b+="/>";return b}function __getDateInputTag(e,b,a,d){var c='<input id="condition_'+b+"_"+a+'" ';c+='name="'+e.enName+'" dbName="'+e.dbName+'" ';c+='dataType="'+e.propertyType+"-"+d+'" class="searchInputClass" ';c+=' readonly="readonly" size="10" ';c+="/>";return c}function __getDateScript(a){var b='$("#'+a+'").datepicker({';b+='"dateFormat":"yy-mm-dd",';b+="changeMonth:true,";b+="changeYear:true,";b+='showButtonPanel:"true"';b+="});";return b}function __getTimeScript(a){var b='$("#'+a+'").datetimepicker({';b+='"dateFormat":"yy-mm-dd",';b+="changeMonth:true,";b+="changeYear:true,";b+="showSecond: false,";b+="showMillisec: false,";b+='"timeFormat": "hh:mm"';b+="});";return b}function __getDateTag(d,b){var c="\u4ece";c+=__getDateInputTag(d,b,"b","first");c+="<br/>";c+="\u5230";c+=__getDateInputTag(d,b,"e","second");c+='<script type="text/javascript">';var a="condition_"+b;if("DATE"==d.propertyType){c+=__getDateScript(a+"_b");c+=__getDateScript(a+"_e")}else{if("TIME"==d.propertyType){c+=__getTimeScript(a+"_b");c+=__getTimeScript(a+"_e")}}c+="<\/script>";return c}function __getTdByPropertyType(d,a){var c=__getEnName(d.enName);var b="";b+="<td>";if("BOOLEAN"==d.propertyType||"ENUM"==d.propertyType){b+=__getSelectTag(d,a,c)}else{if("DATE"==d.propertyType||"TIME"==d.propertyType){b+=__getDateTag(d,a)}else{if(d.optionsCode!=""){b+=__getSelectTag(d,a,c)}else{b+=__getInputTag(d,a,c)}}}b+="</td>";return b}function __getFixedSearchZoonTr(b){var d="";var g=b.length;var a=4;var e=g%a;for(var c=0;c<g;c++){var f=b[c];if(c%a==0){d+="<tr>"}d+='<td class="content-title" align="right">'+f.chName+"</td>";d+=__getTdByPropertyType(f,c);if((c+1)%a==0){d+="</tr>"}}if(e>0){d+='<td colspan="'+((a-e)*2)+'"></td>';d+="</tr>"}return d}function __getFixedSearchZoon(e,a,b,d,c){var f='<div id="fixedSearchZoon" style="display: block;padding:6px 10px 6px 10px;">';f+='<table id="parameter_Table"  class="fix-searchtable" style="width:100%;">';f+=__getFixedSearchZoonTr(e);f+="<tr>";if(e.length>2){f+='<td colspan="8" align="center" >'}else{f+='<td colspan="'+(e.length*2)+'" align="center">'}if(""==b&&""==d){f+='<button class="btn" onclick="commonSingleSearchSubmit({submitForm:\''+c+"',type:'common'});\"><span><span>\u786e\u8ba4</span></span></button>"}else{f+='<button class="btn" onclick="fixedSearchSubmit(\''+b+"', '"+d+"');\"><span><span>\u786e\u8ba4</span></span></button>"}f+='&nbsp;<button class="btn" onclick="clearParameter();"><span><span>\u6e05\u7a7a</span></span></button>';if(a=="true"){f+='<span ><a onclick="fixedToDynamic();" href="#"  > \u9ad8\u7ea7\u67e5\u8be2>></a></span>'}f+="</td>";f+="</tr>";f+="</table>";f+="</div>";return f}function __getSearchBox(){var d='<div id="search_shade"></div>';d+='<div id="search_box" style="display: none;">';var e=_search_params._container_id;var g=_search_params._advanced_search;var f=_search_params._fixed_search_sign;var a=_search_params._submit_form;var c=_search_params._field_list;var b=_gridTagParams._grid_id;var i=_gridTagParams._grid_url;var h=_search_params._fixed_field;var g=_search_params._advanced_search;d+=__getSearchHeader(e,g,f,a);if(h!=""){d+=__getFixedSearchZoon(h,g,b,i,"")}d+=__getSearchZoon(c,b,i,h,"");d+="</div>";return d}function singleSearch(a){if(__dealWithSearchButtonOneself(a.oneself)){return}if(!(__singleSearchValidateRequired(a.listCode)&&__singleSearchValidateRequired(a.submitForm)&&__singleSearchValidateRequired(a.placeId))){alert("\u8bf7\u7ed9\u53c2\u6570listCode\u3001submitForm\u3001placeId\u8d4b\u503c");return}__singleSearch({listCode:a.listCode,submitForm:a.submitForm,placeId:a.placeId})}function commonSingleSearchSubmit(a){if(__searchValueToSubmitForm(a)){singleSearchSubmit(a)}else{alert("\u67e5\u8be2\u6761\u4ef6\u4e2d\u7684\u5de6\u53f3\u5c0f\u62ec\u53f7\u4e0d\u5339\u914d\uff01");return}}function singleSearchSubmit(a){}function __dealWithSearchButtonOneself(a){if($(a).html()=="\u53d6\u6d88\u67e5\u8be2"){$(a).html("\u67e5\u8be2");__removeSingleSearchBox();return true}else{if($(a).html()=="\u67e5\u8be2"){$(a).html("\u53d6\u6d88\u67e5\u8be2");return false}}}function __removeSingleSearchBox(){if($("#search_shade").length>0){$("#search_shade").removeClass("searchOver");$("#search_box").removeClass("searchBox");$("#search_box").css("display","none");$("#search_box").css("display","none");singleSearchContentResize()}}function singleSearchContentResize(){}function __singleSearchValidateRequired(a){if(typeof(a)=="undefined"||a==""){return false}else{return true}}function __singleSearch(b){var a=webRoot;if(typeof(appRoot)!="undefined"&&appRoot!=""){a=appRoot}$.ajax({data:{listCode:b.listCode,url:b.url,submitForm:b.submitForm,placeId:b.placeId},type:"post",url:a+"/portal/singleSearch.action",beforeSend:function(c){},success:function(c,d){if("noQuery"==c){alert("\u8bf7\u5728\u5217\u8868\u8bbe\u7f6e\u4e2d\u542f\u7528\u67e5\u8be2\u529f\u80fd\uff01")}else{__parseSingleSearchData(c)}},complete:function(c,d){},error:function(){}})}function __parseSingleSearchData(data){var obj=eval("("+data+")");var html='<div id="search_shade"></div>';html+='<div id="search_box" style="display: none;">';var containerId=obj.containerId;var advancedSearch=obj.advancedSearch;var fixedSearchSign=obj.fixedSearchSign;var submitForm=obj.submitForm;var fieldList=obj.fieldList;var gridId="page";var fixedField=obj.fixedField;html+=__getSearchHeader(containerId,advancedSearch,fixedSearchSign,submitForm);if(fixedField!=""){html+=__getFixedSearchZoon(fixedField,advancedSearch,"","",submitForm)}html+=__getSearchZoon("","","",fixedField,submitForm);html+="</div>";$("#testdiv").html(html);__parseSingleSearchFieldJson(fieldList);__showSingleSearchDiv(obj.placeId)}function __parseSingleSearchFieldJson(a){jsonFields=a;__publicParseFieldJson(a)}function __showSingleSearchDiv(a){var b=$("#containerSearchInput").val();$("#"+a).css("display","block");if(b!="false"){$("#search_box").css("roll","block");$("#search_box").css("display","block");$("#search_header").css("display","none");$("#search_box").css("width",$("#opt-content").width()+12);$("#opt-content").css("height",$(".opt-body").height()-55);$("#search_box").css("min-width",820);fixedToInputWidth();if($("#fixedSearchSignInput").val()<=0){$("#searchZoon").css("display","block")}if($("#parameter_Table").height()==0){contentResizeForAdvanced()}else{contentResizeForFixed()}}else{$("#search_box").addClass("searchBox");$("#search_box").css("display","block");$("#search_header").css("display","block");$("#search_shade").addClass("searchOver");if($("#fixedSearchSignInput").val()<=0){$("#searchZoon").css("display","block")}$("#search_box").css("width",$("#opt-content").width()*4/5);$("#search_box").css("min-width",820);$("#search_box").css("margin-left",-$("#search_box").width()/2);fixedToInputWidth()}}function __searchValueToSubmitForm(b){$("#__search_parameters").remove();var c="";var a=true;if("common"==b.type){fixedSearchDealWithParameter();c=$("#search_Parameters").val()}else{submitParameter();c=$("#search_Parameters").val();if(!validateBracket(c)){a=false}if(""!=c){c=processDate(c)}}if(a){creatSearchParametersInput(b.submitForm,c);return true}else{return false}};
